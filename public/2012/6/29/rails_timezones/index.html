<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <title>The Exhaustive Guide to Rails Time Zones - Alexander Danilenko</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/application.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap-responsive.css" media="screen" />
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
    <script src='/javascripts/bootstrap-collapse.js'></script>
    <meta content='nanoc 3.4.0' name='generator' />
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <link href='http://danilenko.org/feed.xml' rel='alternate' title='Danilenko.org' type='application/rss+xml' />
  </head>
  <body>
    <div class='navbar navbar-fixed-top'>
      <div class='navbar-inner'>
        <div class='container-fluid'>
          <a class='btn btn-navbar' data-target='.nav-collapse' data-toggle='collapse'>
            <i class='icon-bar'></i>
            <i class='icon-bar'></i>
            <i class='icon-bar'></i>
          </a>
          <a class='brand' href='/'>Alexander Danilenko</a>
          <div class='nav-collapse'>
            <ul class='nav'>
              <li><a href="/">Blog</a></li>
              <li><a href="/contacts/">Contacts</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class='container-fluid'>
      <div class='row-fluid'>
        <div class='span9'>
          <div class='page-header'>
            <h1>The Exhaustive Guide to Rails Time Zones</h1>
            <h2 class='subtitle'>Or what is the difference between Time.zone.now and Time.now</h2>
            <p class='post-info'>
              <span class='label'>29 June 2012</span>
              <a class="comments-count" href="/2012/6/29/rails_timezones/#disqus_thread"></a>
            </p>
          </div>
          <p>
  Ruby and Rails provide great tools for working with time and time zones.
  But my experience shows that Rails developers often pay little attention to how this magic really works,
  and this results in "ghost" problems that arise in particular configuration and time.
  The main gotcha for developer is that you can use "wrong" methods and, in particular circumstances
  (fairly often), get valid results. But then you'll face with unexpected problems on production.
</p>
<p>
  Historically Ruby provides two classes to manage time:
  <code><a href="http://www.ruby-doc.org/core-1.9.3/Time.html">Time</a></code>
and
<code><a href="http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html">DateTime</a></code>.
  They use different approaches internally, which caused
  <a href="http://stackoverflow.com/questions/1261329/whats-the-difference-between-datetime-and-time-in-ruby">different abilities and performance for them</a>.
  But with Ruby 1.9.3 these differences vanished and you are free to choose whatever interface you like.
  But that's in Ruby! When it comes to Rails things get more complicated.
</p>
<p>
  Rails...
</p>
<pre class="well"><code class="language-ruby"><table class="CodeRay"><tr>
<td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
</pre></td>
  <td class="code"><pre><span class="constant">Time</span>.zone.now
<span class="constant">Time</span>.now</pre></td>
</tr></table></code></pre>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'danilenko'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
        <div class='span3'>
          <div class='well sidebar-about'>
            <div class='nav'>
              <div class='nav-header'>About</div>
            </div>
            <img alt='Alexander Danilenko' height='80' src='/images/danilenko.png' width='80' />
            <p>
              Lead developer at
              <a href="http://toptal.com">toptal.com</a>
              with 5 years of Ruby on Rails experience preceded by enterprise
              development and dev teams management.
            </p>
          </div>
          <div class='well sidebar-nav'>
            <ul class='nav nav-list'>
              <li class='nav-header'>Recent Posts</li>
              <li><a href="/2012/6/30/attr_ability/">AttrAbility</a></li>
              <li><a href="/2012/6/29/rails_timezones/">The Exhaustive Guide to Rails Time Zones</a></li>
            </ul>
          </div>
        </div>
      </div>
      <hr />
      <footer>
        <p class='social'>
          <a title="Contacts" href="/contacts/"><i class="icon-envelope"></i></a>
          <a title="Linkedin" href="http://www.linkedin.com/pub/alexander-danilenko/33/442/552"><i class="icon-linkedin"></i></a>
          <a title="Facebook" href="https://www.facebook.com/alexander.danilenko"><i class="icon-facebook"></i></a>
          <a title="github" href="https://github.com/doz"><i class="icon-github"></i></a>
        </p>
        <p>&copy; 2012 Alexander Danilenko</p>
      </footer>
    </div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'danilenko'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
  </body>
</html>
